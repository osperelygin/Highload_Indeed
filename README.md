# Highload Indeed

## Содержание
* ### [1. Тема, целевая аудитория](#1)
* ### [2. Расчет нагрузки](#2)
* ### [3. Глобальная балансировка нагрузки](#3)
* ### [ Список источников ](#sources)

## 1. Тема и целевая аудитория <a name="1"></a>

Indeed — всемирный сервис по поиску работы.

### Целевая аудитория

Трудоспособная часть населения, HR-специалисты

Распределение пользователей по странам:

![Распределение пользователей по странам](images/counry_consumer_distribution.png)

Демография аудитории:

![Демография аудитории](images/demographic_distribution.png)

### Продуктовый функционал
* Создание/изменение/удаление резюме
* Создание/изменение/удаление вакансий
* Поиск вакансий с применением различных фильтров
* Поиск соискателей с применением различных фильтров
* Отклик на вакансию

Основной технической сложностью сервиса является поиск по большому количеству резюме соискателей (245M) и вакансий компаний (533K) в БД. При поиске сотруднкиов, как правило, HR-специалисты используют следующие фильтры: город, режим работы, тип занятости, профессия, должность, опыт работы, желаемый уровень дохода. Соотвественно необходимо обеспечить эффективный поиск в БД резюме соискателей с учетом применения различных фильтров.

### Аналоги
* [myworkdayjobs.com](https://workday.wd5.myworkdayjobs.com/Workday)
* [www.linkedin.com](https://www.linkedin.com)
* [hh.ru](https://hh.ru/)

## 2. Расчет нагрузки <a name="2"></a>

### Продуктовые метрики
* DAU: 21M
* MAU: 350M
* Количество компаний: 14.6K
* Количество доступных вакансий: 533K
* Обновлений/созданий резюме в месяц: 8М
* Количество резюме: 245M
* Среднее время на сайте: 00:06:32

### Технические метрики

Для пересчета продуктовых метрик в технические необходимо ввести некоторые допущения/предположения об сценарии использования сервиса.  
Сперва положим, что из 21M ежедневых пользователей, 100 000 являются HR-специалистами, а остальные, соотвестенно, соискателями. 
Теперь введем следующие предположения:
- соискатель в среднем в день просматривает 3-4 страницы листинга вакансий (около 60 вакансий), при этом он читает подробное описание 5 вакансий;
- на одну вакансию поступает 100 откликов в сутки;
- HR-специалист при поиске сотрудника на открытую вакансию совершает 3-5 запросов с различными поисковыми фильтрами, и из найденных резюме просматривает полное описание 20, при этом в день ему необходимо осуществить поиск сотрудников на 10 открытых вакансий.

#### Размер хранилища

Средний размер харанилища соискателя:

| Хранимые данные | Размер |
| --- | --- |
| Персональные данные | `1 КБ` |
| Резюме | `32 KБ` |

Данные пользователей:

> 245 000 000 * (32 KB + 1 KB) = 7710 GB

Средний размер харанилища вакансии:

| Хранимые данные | Размер |
| --- | --- |
| Описание | `32 КБ` |

Данные вакансий:

> 533 000 * 32 KB = 16 GB

Суммарный объем хранилища

> 7710 GB + 16 GB = 7726 GB = 7.55 TB

#### Расчет RPS:

Запросы соискателей по поиску и просмотру вакансий:

> 20 900 000 * (4 + 5) / 86400 =  2177 RPS

Отклики на вакансии:

> 533 000 * 100 / 86400 = 617 RPS

Запросы HR-специлистов:

> 100 000 * 10 * (5 + 20) / 86400 = 289 RPS

За месяц обновляется/создается 8M резюме:

> 8 000 000 / 30 / 86400 = 3 RPS

Суммарный RPS: 

> 2177 + 617 + 289 + 3 = 3086 RPS

#### Расчет сетевого трафика:

Предположим, что средний размер запрашиваемых страниц равен 150 KB

Средний трафик в день на соискателя:

> 20 900 000 * (4 * 150 KB + 5 * 150 KB) / 86400 = 326 562 KBps = 2551 Mbps

Средний трафик в день на HR:

> 100 000 * 10 * (5 * 150 KB + 20 * 150 KB) / 86400 = 43 402 KBps = 339 Mbps 

Суммарный трафик:

> 2551 + 339 = 2890 Mbps = 2.82 Gbps

## 3. Глобальная балансировка нагузки <a name="3"></a>

### Обоснование расположения ДЦ

| Страна            | Процент пользователей |   RPS    |
|:------------------|:----------------------|:---------|
| США               |          44.53        |   899    |
| Канада            |           9           |   182    |
| Великобритания    |         8.21          |   166    |
| Франция           |         3.82          |   77     |

Больше половины аудитории сервиса находится в Северной Америки, всвязи с этим данный регион подвергается наибольшей нагрузке. С учетом плотности населения США выберем: Нью-Йорк, Лос-Анджелес, Маями и Сиэтл. В Канаде целесообразно расположить ДЦ в городе с наибольшим населением - Торонто. Аудитория сервиса, проживающая в западной Канаде будет использовать ДЦ в Сиэтле из-за близкого географического положения. 

Процент аудитории из Европы относительно небольшой, а учитывая, что большая ее часть проживает в Великобритании или Франции, разумно будет расположить один ДЦ в Лондоне.

<!-- | Дата-центр    | RPS  |
|:--------------|:-----|
| Нью-Йорк      |      |
| Лос-Анджелес  |      |
| Сиэтл         |      |
| Торонто       |      |
| Лондон        |      | -->


## Список использованных источников: <a name="sources"></a>
* https://www.indeed.com/about
* https://hypestat.com/info/indeed.com
* https://homejobshub.com/indeed-revenue-and-usage-statistics/
* https://www.similarweb.com/website/indeed.com/
